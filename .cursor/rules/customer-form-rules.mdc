# 客户表单组件编写指南

`CustomerForm` 是一个复杂的表单组件，用于创建、编辑和查看客户信息。该组件包含多个标签页，用于组织各种类型的客户信息。

## 组件特性

- 使用 Ant Design 的 Form、Tabs、Input 等组件构建表单界面
- 支持多标签页结构，包括基本信息、实缴资本、行政许可、银行信息等
- 整合了图片上传功能，包括单图和多图上传
- 支持表单自动保存功能
- 实现了表单验证和错误处理

## 数据处理流程

1. 将后端数据转换为表单数据（日期字符串转为 Dayjs 对象）
2. 表单提交前将表单数据转换回 API 格式（Dayjs 对象转为字符串）
3. 特殊处理图片字段，确保正确的数据结构
4. 处理嵌套的表格数据（实缴资本、行政许可、实际负责人）

## 实缴资本、行政许可和实际负责人表格处理

- 使用 React 状态而非 Ant Design 表单字段管理表格数据
- 实现了行项目的添加、编辑和删除功能
- 每个表格项支持图片上传
- 表格数据在表单提交前与主表单数据合并

## 最佳实践

- 使用 `Form.useWatch` 监听特定字段变化
- 使用 `useCallback` 避免不必要的函数重新创建
- 将大型表单拆分为多个标签页提高用户体验
- 使用 TypeScript 对表单值和 API 数据进行类型定义
- 对日期字段进行特殊处理，支持"无固定期限"选项
- 使用映射表（`FIELD_TO_TAB_MAP`）快速定位字段所在标签页
- 实现表单自动保存功能并处理验证错误
